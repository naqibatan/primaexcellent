"use strict";
(self.webpackJsonp__wix_thunderbolt_app =
  self.webpackJsonp__wix_thunderbolt_app || []).push([
  [8488],
  {
    58793: function (e, t, n) {
      n.r(t),
        n.d(t, {
          PageTransitionsCompletedSymbol: function () {
            return a.TR;
          },
          PageTransitionsSymbol: function () {
            return a.M$;
          },
          editor: function () {
            return x;
          },
          editorPage: function () {
            return U;
          },
          page: function () {
            return j;
          },
        });
      var o = n(56510),
        i = n(25259),
        s = n(21980),
        a = n(67613),
        r = n(80928);
      const l = (0, o.ff)(
          [(0, o.t6)(i.$e, a.u2), (0, o.t6)(i.Wf, a.u2), a.TR, r.i, s.ZQ],
          (e, t, n, o, i) => {
            const s =
              !!i &&
              "startViewTransition" in i.document &&
              e.shouldUseViewTransition;
            return {
              name: "pageTransitions",
              pageDidMount(o) {
                var i;
                const s = t.get(),
                  a = null == s ? void 0 : s.mountDoneHandler;
                a && a({ transitionName: e.transitionName, pageId: o }),
                  (null === (i = null == s ? void 0 : s.isFirstMount) ||
                    void 0 === i ||
                    i) &&
                    n.notifyPageTransitionsCompleted(o),
                  t.update((e) =>
                    Object.assign(Object.assign({}, e), { isFirstMount: !1 })
                  );
              },
              pageWillUnmount({ contextId: e }) {
                var a, r;
                const l = t.get();
                if (s) {
                  const e = () => {
                      o.getScrollYHistoryState() || o.scrollToTop();
                    },
                    s = (e) => {
                      n.notifyPageTransitionsCompleted(e),
                        o.getScrollYHistoryState() && o.restoreScrollPosition();
                    };
                  !(function (e, t, n, o) {
                    let i, s;
                    t.document.documentElement.dataset.viewTransition =
                      "page-transition";
                    const a = document.startViewTransition(() =>
                      e.then((e) => {
                        (s = e.transitionName),
                          (i = e.pageId),
                          (t.document.documentElement.dataset.pageTransition =
                            s);
                      })
                    );
                    a.ready.then(n),
                      a.finished.then(() => {
                        delete t.document.documentElement.dataset
                          .viewTransition,
                          o(i);
                      });
                  })(
                    new Promise((e) => {
                      t.update((t) =>
                        Object.assign(Object.assign({}, t), {
                          mountDoneHandler: e,
                        })
                      );
                    }),
                    i,
                    e,
                    s
                  );
                }
                null ===
                  (r =
                    null ===
                      (a =
                        null == l
                          ? void 0
                          : l.propsUpdateListenersUnsubscribers) || void 0 === a
                      ? void 0
                      : a[e]) ||
                  void 0 === r ||
                  r.call(a),
                  t.update((t) => {
                    var n;
                    const o =
                      null !==
                        (n =
                          null == t
                            ? void 0
                            : t.propsUpdateListenersUnsubscribers) &&
                      void 0 !== n
                        ? n
                        : {};
                    return (
                      delete o[e],
                      Object.assign(Object.assign({}, t), {
                        propsUpdateListenersUnsubscribers: o,
                      })
                    );
                  });
              },
            };
          }
        ),
        d = (0, o.ff)([(0, o.t6)(i.Wf, a.u2)], (e) => ({
          disableNextTransition: () =>
            e.update((e) =>
              Object.assign(Object.assign({}, e), { nextTransitionEnabled: !1 })
            ),
        })),
        u = (0, o.ff)([], () => {
          let e = [];
          return {
            onPageTransitionsCompleted: (t) => {
              e.push(t);
            },
            notifyPageTransitionsCompleted: (t) => {
              e.forEach((e) => e(t)), (e = []);
            },
          };
        });
      var c = n(13487),
        g = n(27451),
        p = n(55437);
      const b = (0, o.ff)(
        [(0, o.t6)(i.$e, a.u2), p.xP, a.TR, r.i, (0, o.t6)(i.Wf, a.u2), s.ZQ],
        (e, t, n, o, i, s) => ({
          componentTypes: ["Page"],
          componentWillMount(a) {
            const r = i.get(),
              l = !r || r.nextTransitionEnabled,
              d = !r || r.isFirstMount,
              u =
                !!s &&
                "startViewTransition" in s.document &&
                e.shouldUseViewTransition,
              c = a.id;
            t.update({
              SITE_PAGES: Object.assign(
                { transitionEnabled: l },
                u
                  ? {}
                  : {
                      onTransitionStarting: () => {
                        o.getScrollYHistoryState() || o.scrollToTop();
                      },
                      onTransitionComplete: () => {
                        n.notifyPageTransitionsCompleted(c),
                          o.getScrollYHistoryState() &&
                            o.restoreScrollPosition();
                      },
                    }
              ),
            }),
              i.update(() =>
                Object.assign(Object.assign({}, r), {
                  isFirstMount: d,
                  nextTransitionEnabled: !0,
                })
              );
          },
        })
      );
      var m = n(18325),
        f = n(18037),
        T = n.n(f);
      const v = [
          "video.videoInfo.videoId",
          "image.uri",
          "image.link.href",
          "image.displayMode",
          "backgroundImage.uri",
          "backgroundImage.link.href",
          "backgroundImage.displayMode",
        ],
        y = [
          "type",
          "alignType",
          "fittingType",
          "scrollType",
          "colorOverlay",
          "colorOverlayOpacity",
          "color",
          "opacity",
        ],
        O = (e, t, n, o) =>
          o.every((n) => (e && e[n]) === (t && t[n])) &&
          n.every((i) => (!e && !t) || O(e && e[i], t && t[i], n, o)),
        P = (0, o.ff)(
          [
            (0, o.t6)(i.$e, a.u2),
            p.xP,
            a.TR,
            r.i,
            (0, o.t6)(i.Wf, a.u2),
            m.C9,
            m.ku,
          ],
          (e, t, n, o, i, s, a) => {
            const r = `pageBackground_${s}`,
              l = t.subscribeToChanges((n) => {
                var o, s, a, l, d;
                if (r in n) {
                  const u =
                      null === (o = n[r]) || void 0 === o
                        ? void 0
                        : o.fillLayers,
                    c = i.get().pageBackgroundProp,
                    g = e.pageBackground,
                    p = i.get().pageBackground,
                    b =
                      null ===
                        (a =
                          null === (s = i.get()) || void 0 === s
                            ? void 0
                            : s.nextTransitionEnabled) ||
                      void 0 === a ||
                      a,
                    m = !((e, t) => {
                      if (!t || !e) return !1;
                      const n = t.mediaRef,
                        o = n && n.type,
                        i = e.mediaRef,
                        s = i && i.type,
                        a = !n && !i,
                        r = a || o === s;
                      let l = [...y];
                      if ("WixVideo" === o && r) {
                        const e = l.indexOf("color");
                        l.splice(e, 1);
                      } else a && (l = ["color"]);
                      return r && O(t, e, ["mediaRef", "imageOverlay"], l);
                    })(g, p),
                    f =
                      ((l = u),
                      !(
                        (d = c) &&
                        l &&
                        v.every((e) => T().get(d, e) === T().get(l, e))
                      ) || m);
                  i.update((e) =>
                    Object.assign(Object.assign({}, e), {
                      pageBackgroundProp: u,
                      pageBackground: g,
                    })
                  ),
                    t.update({
                      BACKGROUND_GROUP: { transitionEnabled: b && f },
                    });
                }
              });
            return (
              i.update((e) => {
                var t;
                const n =
                  null !==
                    (t =
                      null == e
                        ? void 0
                        : e.propsUpdateListenersUnsubscribers) && void 0 !== t
                    ? t
                    : {};
                return (
                  (n[a] = l),
                  Object.assign(Object.assign({}, e || {}), {
                    propsUpdateListenersUnsubscribers: n,
                  })
                );
              }),
              {
                componentTypes: ["PageBackground"],
                componentWillMount() {
                  var e;
                  const t = i.get(),
                    n =
                      null === (e = null == t ? void 0 : t.isFirstMount) ||
                      void 0 === e ||
                      e;
                  i.update(() =>
                    Object.assign(Object.assign({}, t), { isFirstMount: n })
                  );
                },
              }
            );
          }
        ),
        j = (e) => {
          e(a.TR).to(u),
            e(a.M$).to(d),
            e(c.j.PageDidMountHandler, c.j.PageWillUnmountHandler).to(l),
            e(g.Vx).to(b),
            e(g.Vx).to(P);
        },
        U = (e) => {
          e(c.j.PageDidMountHandler, c.j.PageWillUnmountHandler).to(l),
            e(g.Vx).to(b),
            e(g.Vx).to(P);
        },
        x = (e) => {
          e(a.M$).to(d), e(a.TR).to(u);
        };
    },
  },
]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/group_32.469cae3f.chunk.min.js.map
